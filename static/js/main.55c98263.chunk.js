(this["webpackJsonppolkadot-block-explorer"]=this["webpackJsonppolkadot-block-explorer"]||[]).push([[0],{1009:function(t,e,n){},1010:function(t,e,n){},1011:function(t,e,n){},1016:function(t,e,n){},1017:function(t,e,n){"use strict";n.r(e);var c=n(13),s=n(16),a=n(412),r=n.n(a),i=n(26),o=n.n(i),l=n(415),b=n(82),u=n(121),h=n(122),j=n(127),p=n(126),d=n.p+"static/media/loader.3f6ea0a7.gif",x=n(245),m=n(151),O=n(34);n(1009),n(1010);var k=function(t){var e=t.block;return Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"block-details",children:[Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"Block Number"})," - ",e.blockNumber]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"Parent Hash"})," - ",e.parentHash]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"Hash"})," - ",e.hash]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"State Root"})," - ",e.stateRoot]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"Extrinsics Root"})," - ",e.extrinsicsRoot]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"Block Author"})," - ",e.blockAuthor]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"Timestamp"})," - ",e.timestamp]})]})})},f=function(t){Object(j.a)(n,t);var e=Object(p.a)(n);function n(t){var c;return Object(u.a)(this,n),(c=e.call(this,t)).listenToNewBlocks=Object(b.a)(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=0,n=[],t.next=4,c.state.api.rpc.chain.subscribeNewHeads(function(){var t=Object(b.a)(o.a.mark((function t(s){var a,r,i,l,b;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.state.api.derive.chain.subscribeNewHeads((function(t){a=t.author.toString()}));case 2:return t.next=4,c.state.api.query.timestamp.now();case 4:r=t.sent,i=new Date(r.toNumber()),l=i.toString(),b={parentHash:s.parentHash.toString(),stateRoot:s.stateRoot.toString(),extrinsicsRoot:s.extrinsicsRoot.toString(),blockNumber:s.number.toNumber(),hash:s.hash.toString(),timestamp:l,blockAuthor:a},256!==++e&&(n.push(b),c.setState({blocks:n}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)}))),c.state={api:t.api,blocks:[]},c.listenToNewBlocks(),c}return Object(h.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"note-styles",children:Object(c.jsxs)("p",{children:["\u231b",Object(c.jsx)("i",{children:" Get real time block updates - latest block on the top"})," \u231b"]})}),void 0!==this.state.blocks[0]?this.state.blocks.slice(0).reverse().slice(0,2).map((function(t){return Object(c.jsx)("div",{children:Object(c.jsx)(k,{block:t})},t.hash)})):Object(c.jsx)("img",{src:d,style:{display:"block",margin:"auto",width:"300px"}})]})}}]),n}(s.Component),v=(n(1011),n.p+"static/media/polkadot.ec05169c.png");var g=function(){return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("div",{className:"heading-styles",children:[Object(c.jsx)("img",{src:v}),Object(c.jsx)("h4",{children:"Block Explorer"})]}),Object(c.jsxs)("div",{className:"navbar-styles",children:[Object(c.jsx)(m.b,{to:"/polkadot-block-explorer",children:Object(c.jsx)("button",{children:"Explorer"})}),Object(c.jsx)(m.b,{to:"/search",children:Object(c.jsx)("button",{children:"Search Block"})})]})]})},w=n(414),y=(n(1016),function(t){Object(j.a)(n,t);var e=Object(p.a)(n);function n(t){var c;return Object(u.a)(this,n),(c=e.call(this,t)).onChangeHandler=function(t){c.setState(Object(w.a)({},t.target.name,t.target.value))},c.getBlockDetails=Object(b.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.state.api.rpc.chain.getBlockHash(c.state.blockNumber,function(){var t=Object(b.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.setState({blockHash:e.toString()}),t.next=3,c.state.api.rpc.chain.getBlock(c.state.blockHash,function(){var t=Object(b.a)(o.a.mark((function t(e){var n,s,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(e.block.toString()).header,t.next=3,c.state.api.derive.chain.getHeader(c.state.blockHash);case 3:s=t.sent,e.block.extrinsics.forEach((function(t,e){if("timestamp"===t.toHuman().method.section){var n=Number(t.toHuman().method.args[0].replace(/,/g,"")),c=new Date(n);a=c.toString()}})),r={parentHash:n.parentHash,stateRoot:n.stateRoot,extrinsicsRoot:n.extrinsicsRoot,blockNumber:c.state.blockNumber,hash:c.state.blockHash,timestamp:a,blockAuthor:s.author.toString()},c.setState({block:r});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)}))),c.handleSubmit=function(t){c.getBlockDetails(),t.preventDefault()},c.state={api:t.api,blockNumber:"",blockHash:null,block:{}},c}return Object(h.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"form-styles",children:Object(c.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(c.jsx)("label",{children:"Enter Block Number"}),Object(c.jsx)("input",{type:"text",name:"blockNumber",value:this.state.blockNumber,onChange:this.onChangeHandler}),Object(c.jsx)("input",{type:"submit",value:"Get Block"})]})}),0===Object.keys(this.state.block).length&&null!==this.state.blockHash?Object(c.jsx)("img",{src:d,style:{display:"block",margin:"auto",width:"300px"}}):0!==Object.keys(this.state.block).length?Object(c.jsx)("div",{children:Object(c.jsx)(k,{block:this.state.block})},this.state.blockHash):null]})}}]),n}(s.Component)),N=function(t){Object(j.a)(n,t);var e=Object(p.a)(n);function n(t){var c;return Object(u.a)(this,n),(c=e.call(this,t)).connect=Object(b.a)(o.a.mark((function t(){var e,n,s,a,r,i,b;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new x.WsProvider("wss://rpc.polkadot.io"),t.next=3,x.ApiPromise.create({provider:e});case 3:return n=t.sent,t.next=6,Promise.all([n.rpc.system.chain(),n.rpc.system.name(),n.rpc.system.version()]);case 6:s=t.sent,a=Object(l.a)(s,3),r=a[0],i=a[1],b=a[2],console.log("You are connected to chain ".concat(r," using ").concat(i," v").concat(b)),c.setState({api:n});case 13:case"end":return t.stop()}}),t)}))),c.state={api:null},c.connect(),c}return Object(h.a)(n,[{key:"render",value:function(){var t=this;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(m.a,{children:[Object(c.jsx)(g,{}),this.state.api?Object(c.jsxs)(O.c,{children:[Object(c.jsx)(O.a,{path:"/polkadot-block-explorer",exact:!0,render:function(){return Object(c.jsx)(f,{api:t.state.api})}}),Object(c.jsx)(O.a,{path:"/search",render:function(){return Object(c.jsx)(y,{api:t.state.api})}})]}):Object(c.jsx)("img",{src:d,style:{display:"block",margin:"auto",width:"300px"}})]})})}}]),n}(s.Component);r.a.render(Object(c.jsx)(N,{}),document.getElementById("root"))},442:function(t,e){},495:function(t,e){},497:function(t,e){},508:function(t,e){},510:function(t,e){},536:function(t,e){},538:function(t,e){},539:function(t,e){},545:function(t,e){},547:function(t,e){},566:function(t,e){},578:function(t,e){},581:function(t,e){},602:function(t,e){}},[[1017,1,2]]]);
//# sourceMappingURL=main.55c98263.chunk.js.map